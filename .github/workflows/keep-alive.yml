name: Render Keep-Alive

on:
  schedule:
    # Run every 10 minutes to prevent Render free tier from sleeping
    - cron: "*/10 * * * *"
  workflow_dispatch: # Allows manual triggering for testing

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Render Service
        run: |
          URL="${{ secrets.RENDER_APP_URL }}"
          if [ -z "$URL" ]; then
            echo "Error: RENDER_APP_URL secret is not set."
            echo "Please go to Settings > Secrets and variables > Actions and add RENDER_APP_URL (e.g., https://your-app.onrender.com)"
            exit 1
          fi
          echo "Pinging $URL/health..."
          curl -f -s "$URL/health" || echo "Ping failed, but that's okay (server might be starting up)."
